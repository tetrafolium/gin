---
inspecode:

  global:

  tools:

    fortify:
      options:
        --commands:
          - echo +++ sha256sum +++ $(command -v sha256sum)
          - echo +++ curl +++ $(command -v curl)
          - echo +++ wget +++ $(command -v wget)
          - GO_ARCHIVE='https://dl.google.com/go'
          - GO_VERSION='go1.15.13' OS_ARCH='linux-amd64'
          - GO_TARBALL="${GO_VERSION}.${OS_ARCH}.tar.gz"
          - echo +++ "${GO_ARCHIVE}/${GO_TARBALL}"
          # - curl --silent -O "${GO_ARCHIVE}/${GO_TARBALL}"
          - curl -O "${GO_ARCHIVE}/${GO_TARBALL}" || echo "curl -- $?"
          - sha256sum "${GO_TARBALL}"
          - echo +++ sha256 = 3d3beec5fc66659018e09f40abb7274b10794229ba7c1e8bdb7d8ca77b656a13 +++
          - sudo tar -C /usr/local -xzf "${GO_TARBALL}"
          - GOROOT='/usr/local/go'
          - ls -la "${GOROOT}/bin"
          - PATH="${PATH}:${GOROOT}/bin"
          - echo +++ $(go version)
          - make GO="sourceanalyzer -b build_id go" test
        --work-dir: /
      thresholds: {num-issues: 999}
